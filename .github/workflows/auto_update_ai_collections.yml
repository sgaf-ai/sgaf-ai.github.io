name: update ai collections

on: push

jobs:
  build:
runs-on: ubuntu-latest

steps:
  - name: Checkout
    uses: actions/checkout@v2
  - name: run update ai collections
    run: sh automation/update_ai_collections.sh
  - name: switching from HTTPS to SSH
    run: git remote set-url origin ${{ secrets.ssh }}
  - name: check for changes
    run: git status
  - name: stage changed files
    run: git add .
  - name: commit changed files
    run: git commit -m "Auto updating ai_collections"
  - name: fetch from master
    run: git fetch origin master
  - name: push code to master
    run: git push origin HEAD:master